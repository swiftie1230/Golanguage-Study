# 패키지

패키지란 Go언어에서 코드를 묶는 가장 큰 단위다.

## main 패키지

main 패키지는 특별한 프로그램 시작점을 포함한 패키지이다.

프로그램이 실행되면 (대부분) 운영체제는 프로그램을 메모리로 올리는데 이것을 로드(Load)라고 한다.

--

## 패키지 사용하기

import 뒤에 패키지명을 큰따옴표로 묶어서 적는다.

    import "fmt"

소괄호로 패키지들을 묶어 여러 패키지를 임포트 시킬 수 있다.

    import (
        "fmt"
        "os"
    )

---

## 경로가 있는 패키지 사용하기

    package main

    import (
        "fmt"
        "math/rand"
    )

    func main() {
        fmt.Println(rand.Int())
    }

---

## 겹치는 패키지 문제 별칭으로 풀기

패키지명이 겹치면 `별칭`을 줘서 구별한다.

    import (
        "text/template"
        "html/template"
    )

->

    import (
        "text/template"             // template 패키지
        htemplate "html/template"   // 별칭 htemplate
    )

---

## 사용하지 않는 패키지 포함하기

패키지를 가져오면 반드시 사용해야 한다.

패키지를 임포트하고나서 사용하지 않으면 에러가 발생함.

패키지를 직접 사용하진 않지만 부가효과를 얻고자 임포트하는 경우에는 밑줄 _을 패키지명 앞에 붙여주면 된다.

    import (
        "database/sql"
        _ "github.com/mattn/go-sqlite3"
    )

---

## 패키지 설치하기

1. Go언어에서 기본 제공하는 패키지는 Go 설치 경로에서 찾는다.

2. 깃허브와 같은 외부 저장소에 저장된 패키지의 경우 외부 저장소에서 다운받아 GOPATH\pkg 폴더에 설치한다.

3. 현재 모듈 아래 위치한 패키지인지 검사한다.

---

## Go 모듈

**go build를 하려면 반드시 Go모듈 루트 폴더에 go.mod 파일이 있어야 한다.**

    go mod init [패키지명]

---

## 패키지명과 패키지 외부 공개

Go언어에서 패키지명은 쉽고 간단하게 이름지을 것을 권장한다.

그리고 모든 문자를 소문자로 할 것을 권장하고 있다.

_패키지 전역으로 선언된 첫 글자가 대문자로 시작되는 모든 변수, 상수, 타입, 함수, 메서드는 패키지 외부로 공개된다._

---

## 패키지 초기화

패키지를 임포트하면 어떤 일이 벌어질까?

패키지를 임포트하면 컴파일러는 패키지 내 전역 변수를 초기화 한다.

그 다음 패키지에 `init()` 함수가 있다면 호출해 패키지를 초기화 한다.

단! _init() 함수는 반드시 입력 매개변수가 없고 반환값도 없는 함수여야 한다._

**만약 어떤 패키지의 초기화 함수인 init() 함수 기능만 사용하기 원할 경우 밑줄 _을 이용해서 임포트한다.**