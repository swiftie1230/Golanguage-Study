# 함수 고급편

## 가변 인수 함수

fmt 패키지의 Println 함수는 인수 개수가 정해져 있지 않는데,

함수 인수 개수가 고정적이지 않은 함수를 `가변 인수 함수` 라고 한다.

    fmt.Println()
    fmt.Println(1)
    fmt.Println(1, 2, 3, 4, 5, 6, 7, 8, 9)

## ... 키워드 사용

`...` 키워드를 사용해서 가변 인수를 처리할 수 있다.

인수 타입 앞에 ...를 붙여 해당 타입 인수를 여러 개 받는 가변 인수임을 표시하면 된다.

    fmt.Println(2, "hello", 3.14)

🔅 여러 타입을 인수로 한꺼번에 쓰는 방법

_모든 타입이 빈 인터페이스를 포함하고 있기 때문에 빈 인터페이스 가변 인수 ...interface{} 타입으로 받으면 모든 타입의 가변 인수를 받을 수 있다._

---

## defer 지연 실행

때론 함수가 종료되기 직전에 실행해야 하는 코드가 있을 수 있는데, 대표적으로 파일이나 소켓 핸들처럼 OS 내부 자원을 사용하는 경우이다.

파일을 생성하거나 읽을 때 OS에 파일 핸들을 요청한다. 그러면 윈도우, 리눅스, 맥 OS는 파일 핸들을 만들어서 프로그램에 알려준다.

하지만! 이 같은 자원은 OS 내부 자원이기 때문에 반드시 쓰고 나서 OS에 되돌려줘야 한다.

이때 사용하는 문법이 `defer`

    defer 명령문

_명령문이 바로 실행되는 게 아닌 해당 함수가 종료되기 직전에 실행되도록 지연된다._

**defer는 역순으로 호출됨!**

---

## 함수 타입 변수

`함수 타입 변수`란 함수를 값으로 갖는 변수를 의미한다.

컴퓨터는 0, 1 로 나타낼 수 있는 숫자값만 가질 수 있고, 포인터는 숫자로 나타낼 수 있는 메모리 주소를 값으로 가진다.

함수 시작 지점 역시 숫자로 표현할 수 있는데 함수 시작 지점이 바로 함수를 가리키는 값이고, 

마치 포인터처럼 함수를 가리킨다고 해서 `함수 포인터` 라고 부른다.

_합수 타입은 함수명과 함수 코드 블록을 제외한 함수 정의로 표시한다._

---

## 함수 리터럴

`함수 리터럴` 은 이름 없는 함수로 함수명을 적지 않고 함수 타입 변숫값으로 대입되는 함숫값을 의미한다.

_함수명이 없기 때문에 함수명으로 직접 함수를 호출할 수 없고 함수 타입 변수로만 호출됨._


`익명함수` 또는 `람다` 라고 불리기도 한다.


### 🧩함수 리터럴 내부상태

함수 리터럴은 필요한 변수를 내부 상태로 가질 수 있는데 함수 리터럴 내부에서 사용되는 외부 변수는 자동으로 함수 내부 상태로 저장된다.

### 🧩함수 리터럴 내부 상태 주의점

함수 리터럴 외부 변수를 내부 상태로 가져오는 것을 `캡쳐` 라고 한다.

캡쳐는 값 복사가 아닌 참조 형태로 가져오기 때문에 주의해야 함!

### 🧩파일 핸들을 내부 상태로 사용하는 예

함수 리터럴을 이용해 원하는 함수를 그때그때 정의해서 함수 타입 변숫값으로 사용할 수 있고,

필요한 외부 변수를 내부 상태로 가져와서 편리하게 사용할 수 있다.

